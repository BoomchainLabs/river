// take in a service and a transport and do some magic
